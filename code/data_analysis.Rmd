---
title: "Linked fate lit. review"
author: "Jae Yeon Kim"
output:
  html_document:
    number_sections: true
    toc: yes
  pdf_document:
    toc: yes
---

# Setup

```{r include=FALSE}

# Clean up the environment

rm(list = ls())

# Import pacakges 

if (!require("pacman")) install.packages("pacman")
pacman::p_load(
        tidyverse, # for the tidyverse framework
        patchwork, # for arranging ggplots 
        desc, # for descriptive stat analysis
        ggpubr, # for arranging ggplots 
        ggthemes, # for fancy ggplot themes
        broom, # for modeling
        ggfortify, # extended version of ggplot 
        ggsci, # for color palette
        Hmisc, # for capitalization
        stargazer, # for model reports  
        conflicted # for resovling conflicts 
        )

# Resolve conflicts

conflicted::conflict_prefer("select", "dplyr")
conflicted::conflict_prefer("filter", "dplyr")
conflicted::conflict_prefer("count", "dplyr")
conflicted::conflict_prefer("mutate", "dplyr")

```

```{r}

# load data 

lit_review <- read_csv("/home/jae/linked_fate_review/raw_data/linked_fate_review.csv")

```


# Data Collection 

I searched linked fate related articles using Google scholar. I used two search queries: (1) "linked fate" + "dawson" and (2) "linked fate" + "group consciousness" + "solidarity". (1) is a narrow search that only found articles directly related to Dawson's origianl work. (2) is a broad search that found articles thematically related to the topcis that Dawson discussed in his book. I avoided collecting data on books, book chapters, and book reviews since many of them overlap with what individual research papers reported. I searched up to 150 results using each search query and removed the duplicate. This search may not be exhausitive but it at least provides some systematic evidence on the scope of scholarly works on linked fate.


## The total N of articles

First, let's look at the total N of articles.

```{r echo=FALSE}

cat(("The total number of articles is"), nrow(lit_review))

```

Some articles are lit reviews or law review artices or thoeretical pieces that don't discuss data. Let's exclude them.

```{r echo=FALSE}

cat("The total number of empirical articles is", 
    length(subset(lit_review, is.na(Survey) == FALSE)$Author))

```

```{r echo=FALSE}
cat("The percentage of empirical articles in the data is", 
    length(subset(lit_review, is.na(Survey) == FALSE)$Author)/length(lit_review$Author))
```

```{r echo=FALSE}

cat("The total number of journals in the data is",
    length(unique(lit_review$Journal)))

```


## Overall patterns

An overall publication pattern on linked fate. Articles publisehd in recent years are less likely to be included in the data due to their less well-known status. That may explain why there are fewer articles in the past few years.

### Publication trend on linked fate

```{r echo=FALSE}

lit_review %>%
  group_by(Pub.year) %>%
  count() %>%
  ggplot(aes(x = Pub.year, y = n)) +
  geom_point() +
  geom_line() +
  theme_pubr() +
  labs(title = "Publication trend on linked fate", x = "Publication years", y = "Count") + scale_x_continuous(breaks= c(2000, 2005, 2010, 2015)) +
  scale_y_continuous(breaks= scales::pretty_breaks()) +
  theme(axis.text.x=element_text(angle=90, hjust=1))

ggsave("/home/jae/linked_fate_review/output/pub_trend.png", width = 7) 

```

### Publication on linked fate by subject group

```{r echo=FALSE}

lit_review %>%
  gather(group, value, Black, Black_immigrants, Asian, Latinx, Whites, Others) %>%
  filter(value == 1) %>%
  group_by(Pub.year, group) %>%
  dplyr::summarize(n = n()) %>%
  mutate(prop = n / sum(n),
         prop = round(prop,2)) %>%
  mutate(group = recode(group, 
                        'Black_immigrants' = "Black immigrants",
                        'Asian' = 'Asian Americans')) %>%
  filter(Pub.year >= 2002) %>%
  ggplot(aes(x = Pub.year, y = prop, fill = group)) +
    geom_col(position = "fill") +
    labs(title = "Publication trend on linked fate sorted by research subjects",
      x = "Publication years", y = "Percentage",
      fill = "Research subjects") +
    scale_x_continuous(breaks= c(2000, 2005, 2010, 2015)) +
    scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
    theme_pubr() +
    scale_fill_npg()

ggsave("/home/jae/linked_fate_review/output/pub_trend_sub_groups.png", width = 8)

```

```{r}

lit_review %>%
  mutate(total = Black + Black_immigrants + Asian + Latinx + Whites + Others) %>%
  gather(group, value, Black, Black_immigrants, Asian, Latinx, Whites, Others, total) %>%
  filter(value >= 1) %>%
  group_by(group) %>%
  count()

lit_review %>%
  mutate(total = Black + Black_immigrants + Asian + Latinx + Whites + Others) %>%
  gather(group, value, Black, Black_immigrants, Asian, Latinx, Whites, Others, total) %>%
  filter(value >= 2) %>%
  group_by(group) %>%
  count()
```

## Journal patterns 

General social science categories include journals like APSR, AJSP, JOP as well as Political Research Quarterly (PQR) and American Politics Research (APR).

```{r echo=FALSE}

lit_review %>%
  group_by(Journal_type) %>%
  count() %>%
  ggplot(aes(x = reorder(Journal_type, n), y = n)) +
  geom_col() +
  coord_flip() +
  theme_pubr() +
  labs(title = "Articles by academic fields",
    x = "Academid fields", y = "Count")

ggsave("/home/jae/linked_fate_review/output/pub_trend_journals.png")
```

## Data patterns 

Note that these counts are not mutually exclusive. For instance, some studies use surveys plus experimens or qualitative evidence (interviews). Since methods follow trends, I did line rather than bar plotting.

1. Survey: relying on survey data 
    
2. Experiment: relying on experimental data 

3. Qualitative: relying on qualitative evidence (e.g., interviews)


```{r echo=FALSE}

lit_review %>%
  gather(data_types, values, Survey, Experiment, Qualitative) %>%
  filter(values == 1) %>%
  group_by(Pub.year, data_types) %>%
  dplyr::summarize(n = n()) %>%
  mutate(prop = n / sum(n),
         prop = round(prop,2)) %>%
  filter(Pub.year >= 2002) %>%
  ggplot(aes(x = Pub.year, y = prop, fill = data_types)) +
    geom_col(position = "fill") +
    labs(title = "Publication trend by data types",
      x = "Publication years", y = "Percentage",
      fill = "Data types") +
    scale_x_continuous(breaks= c(2000, 2005, 2010, 2015)) +
    scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
    theme_pubr() +
    scale_fill_npg()

ggsave("/home/jae/linked_fate_review/output/pub_trend_data_types.png")
```